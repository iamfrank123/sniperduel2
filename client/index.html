<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sniper Duel - 1v1 FPS</title>
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <!-- Main Menu -->
  <div id="main-menu" class="screen active">
    <div class="menu-container">
      <h1 class="game-title">SNIPER DUEL</h1>
      <p class="game-subtitle">1v1 Tactical Combat</p>

      <div class="menu-inputs">
        <input type="text" id="player-nickname" placeholder="Insert Nickname" maxlength="15" class="code-input">
      </div>
      <div class="menu-buttons">
        <button id="create-match-btn" class="btn btn-primary">Create Match</button>
        <button id="join-match-btn" class="btn btn-secondary">Join Match</button>
        <button id="settings-btn" class="btn btn-tertiary">Settings</button>
      </div>
    </div>
  </div>

  <!-- Join Match Screen -->
  <div id="join-screen" class="screen">
    <div class="menu-container">
      <h2>Join Match</h2>
      <input type="text" id="join-nickname" placeholder="Insert Your Nickname" maxlength="15" class="code-input"
        style="margin-bottom: 10px;">
      <input type="text" id="invite-code-input" placeholder="Enter 6-digit code" maxlength="6" class="code-input">
      <div class="menu-buttons">
        <button id="join-confirm-btn" class="btn btn-primary">Join</button>
        <button id="join-back-btn" class="btn btn-secondary">Back</button>
      </div>
      <p id="join-error" class="error-message"></p>
    </div>
  </div>

  <!-- Lobby Screen -->
  <div id="lobby-screen" class="screen">
    <div class="menu-container">
      <h2>Waiting for Opponent...</h2>
      <div class="invite-code-display">
        <p>Invite Code:</p>
        <h1 id="lobby-code" class="code-display">------</h1>
        <button id="copy-code-btn" class="btn btn-small">Copy Code</button>
      </div>
      <div class="lobby-settings">
        <label><input type="checkbox" id="lobby-infinite-ammo"> Infinite Ammo</label>
        <div class="setting-item">
          <label>Movement Speed: <span id="lobby-speed-value">1.0</span></label>
          <input type="range" id="lobby-speed-input" min="0.5" max="3.0" step="0.1" value="1.0">
        </div>
        <div class="setting-item">
          <label>Jump Level: <span id="lobby-jump-value">1.0</span></label>
          <input type="range" id="lobby-jump-input" min="0.5" max="3.0" step="0.1" value="1.0">
        </div>
        <p style="color: #00ffff; margin-top: 10px;">Mode: Infinite Deathmatch</p>
      </div>
      <p class="lobby-status" id="lobby-status">Waiting for player to join...</p>
      <button id="lobby-cancel-btn" class="btn btn-secondary">Cancel</button>
    </div>
  </div>

  <!-- Settings Screen -->
  <div id="settings-screen" class="screen">
    <div class="menu-container">
      <h2>Settings</h2>
      <div class="settings-group">
        <label>Mouse Sensitivity: <span id="sensitivity-value">1.0</span></label>
        <input type="range" id="sensitivity-slider" min="0.1" max="3.0" step="0.1" value="1.0">
      </div>
      <div class="settings-group">
        <label>Master Volume: <span id="volume-value">100%</span></label>
        <input type="range" id="volume-slider" min="0" max="100" step="5" value="100">
      </div>
      <div class="settings-group">
        <label>
          <input type="checkbox" id="fullscreen-toggle">
          Fullscreen
        </label>
      </div>
      <button id="settings-back-btn" class="btn btn-primary">Back</button>
    </div>
  </div>

  <!-- Game HUD -->
  <div id="game-hud" class="hidden">
    <!-- Crosshair -->
    <div id="crosshair" class="crosshair"></div>

    <!-- Hit Marker -->
    <div id="hit-marker" class="hit-marker hidden"></div>

    <!-- Top Bar -->
    <div class="hud-top">
      <div id="leaderboard" class="leaderboard">
        <!-- Dynamically populated -->
      </div>
      <div class="mode-info">
        DEATHMATCH
      </div>
    </div>

    <!-- Kill Feed -->
    <div id="kill-feed" class="kill-feed"></div>

    <!-- Bottom Left - Player Stats -->
    <div class="hud-bottom-left">
      <div class="health-bar">
        <div class="health-fill" id="health-fill"></div>
        <span id="health-text">100</span>
      </div>
      <div class="ammo-display">
        <span id="current-ammo" class="ammo-current">5</span>
        <span class="ammo-separator">/</span>
        <span id="reserve-ammo" class="ammo-reserve">20</span>
      </div>
    </div>

    <!-- Scope Overlay -->
    <div id="scope-overlay" class="scope-overlay hidden">
      <div class="scope-reticle"></div>
    </div>

    <!-- Damage Indicator -->
    <div id="damage-indicator" class="damage-indicator hidden"></div>
  </div>

  <!-- Round End Screen -->
  <div id="round-end-screen" class="overlay-screen hidden">
    <div class="overlay-content">
      <h2 id="round-result">VICTORY</h2>
      <p id="round-details">You eliminated the enemy</p>
      <p class="next-round-timer">Next round in <span id="next-round-countdown">5</span>s</p>
    </div>
  </div>

  <!-- Match End Screen -->
  <div id="match-end-screen" class="overlay-screen hidden">
    <div class="overlay-content">
      <div class="result-title" id="match-result">VICTORY</div>
      <div class="match-score" id="final-score-display">3 - 1</div>
      <div class="menu-buttons">
        <button id="return-menu-btn" class="menu-btn secondary">MAIN MENU</button>
      </div>
    </div>
  </div>

  <!-- Game Start Screen -->
  <div id="game-start-screen" class="overlay-screen hidden">
    <div class="overlay-content">
      <h2>MATCH READY</h2>
      <p>Click below to enter combat</p>
      <button id="start-combat-btn" class="btn btn-primary start-btn">ENTER COMBAT</button>
    </div>
  </div>

  <!-- Loading Screen -->
  <div id="loading-screen" class="overlay-screen">
    <div class="overlay-content">
      <h2>Loading...</h2>
      <div class="loading-spinner"></div>
    </div>
  </div>

  <!-- Game Canvas -->
  <canvas id="game-canvas"></canvas>

  <!-- Scripts -->
  <script type="importmap">
{
  "imports": {
    "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
    "socket.io-client": "https://cdn.socket.io/4.6.1/socket.io.esm.min.js"
  }
}
</script>
  <script type="module" src="/js/main.js"></script>
</body>

</html>